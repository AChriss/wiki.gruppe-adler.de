(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{290:function(e,t,r){"use strict";r.r(t);var a=r(2),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"üìù-liste-der-adler-infrastruktur"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#üìù-liste-der-adler-infrastruktur"}},[e._v("#")]),e._v(" üìù Liste der Adler-Infrastruktur")]),e._v(" "),r("h2",{attrs:{id:"hosts"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hosts"}},[e._v("#")]),e._v(" Hosts")]),e._v(" "),r("h3",{attrs:{id:"horst"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#horst"}},[e._v("#")]),e._v(" Horst")]),e._v(" "),r("blockquote",[r("p",[e._v("Der root-Server bei Hetzner, auf dem die ganzen VMs laufen. Hat iwie dr√∂lfzig GB RAM und so.")])]),e._v(" "),r("p",[e._v("IPv4: "),r("code",[e._v("138.201.30.232")]),e._v("\nIPv6: "),r("code",[e._v("2a01:4f8:171:3267::2")])]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Typ")]),e._v(" "),r("th",[e._v("Domain Names")]),e._v(" "),r("th",[e._v("OS")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("host")]),e._v(" "),r("td",[e._v("prometheus.gruppe-adler.de")]),e._v(" "),r("td",[e._v('Debian 10 "buster" (testing)')])])])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Services")]),e._v(" "),r("ul",[r("li",[e._v("hostet die VMs (kvm/virsh)")]),e._v(" "),r("li",[e._v("und den Prometheus-Service")]),e._v(" "),r("li",[e._v("mitsamt einem Anrop-Auth-Proxy vor prometheus.gruppe-adler.de")])])]),e._v(" "),r("h3",{attrs:{id:"www"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#www"}},[e._v("#")]),e._v(" www")]),e._v(" "),r("blockquote",[r("p",[e._v("Alles was web ist (und nicht armaserver-Verwaltung)")])]),e._v(" "),r("p",[e._v("IPv4: "),r("code",[e._v("138.201.30.245")]),e._v("\nIPV6: "),r("code",[e._v("2a01:4f8:171:3267::10")])]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Typ")]),e._v(" "),r("th",[e._v("Domain Names")]),e._v(" "),r("th",[e._v("OS")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("VM")]),e._v(" "),r("td",[e._v("gruppe-adler.de, www.gruppe-adler.de, forum.gruppe-adler.de, maps.gruppe-adler.de, api.gruppe-adler.de, wiki.gruppe-adler.de")]),e._v(" "),r("td",[e._v('Debian 8 "jessie"')])])])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Services")]),e._v(" "),r("ul",[r("li",[e._v("Website (Website/Blog, Forum)")]),e._v(" "),r("li",[e._v("ar3play-web (defunct)")]),e._v(" "),r("li",[e._v("Arma3Sync")]),e._v(" "),r("li",[e._v("Blechadler (hubot-Chatbot)")]),e._v(" "),r("li",[e._v("Wiki")])])]),e._v(" "),r("h3",{attrs:{id:"ts"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ts"}},[e._v("#")]),e._v(" ts")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Typ")]),e._v(" "),r("th",[e._v("Domain Names")]),e._v(" "),r("th",[e._v("OS")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("VM")]),e._v(" "),r("td",[e._v("ts.gruppe-adler.de")]),e._v(" "),r("td",[e._v('Debian 9 "Stretch"')])])])]),e._v(" "),r("p",[e._v("IPv4: "),r("code",[e._v("138.201.30.246")]),r("br"),e._v("\nIPv6: "),r("code",[e._v("2a01:4f8:171:3267::20")])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Server Setup")]),e._v(" "),r("p",[e._v("Der Teamspeak-Server l√§uft unter dem Benutzer "),r("code",[e._v("ts3server")]),e._v(" auf "),r("code",[e._v("ts.gruppe-adler.de")]),e._v(". Er startet √ºber "),r("code",[e._v("/opt/teamspeak‚Ä¶irgendwas‚Ä¶3.3.0/irgendwsa‚Ä¶startscript-something.sh")]),e._v(". Weitere Einstellungen finden sich unter "),r("code",[e._v("/etc/teamspeak-server.ini")]),e._v(" sowie "),r("code",[e._v("/etc/default/teamspeak-server")]),e._v(".")])]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("Fun Fact")]),e._v(" "),r("p",[e._v("Der Host f√ºr Teamspeak "),r("em",[e._v("mu√ü")]),e._v(" bei der Namensaufl√∂sung IPv4 vor IPv6 bevorzugen. Sonst kann Teamspeak nicht zu accounting.teamspeak.com connecten, und beendet sich nach 2h Daf√ºr (f√ºr Debian/Ubuntu) in "),r("code",[e._v("/etc/gai.conf")]),e._v(" diese Zeile finden: "),r("code",[e._v("#precedence ::ffff:0:0/96 100")]),e._v(" und entkommentieren.")])]),e._v(" "),r("h3",{attrs:{id:"win-arma"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#win-arma"}},[e._v("#")]),e._v(" win-arma")]),e._v(" "),r("blockquote",[r("p",[e._v("Gameserver VM")])]),e._v(" "),r("p",[e._v("IPv4: "),r("code",[e._v("138.201.30.228")]),e._v("\nIPv6: "),r("code",[e._v("2a01:4f8:171:3267::40")])]),e._v(" "),r("p",[e._v("Administration via RDP auf Port 1337"),r("br"),e._v(" "),r("code",[e._v("arma.gruppe-adler.de:1337")])]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Typ")]),e._v(" "),r("th",[e._v("Domain Names")]),e._v(" "),r("th",[e._v("OS")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("VM")]),e._v(" "),r("td",[e._v("-")]),e._v(" "),r("td",[e._v("Windows Server 2016")])])])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Services")]),e._v(" "),r("ul",[r("li",[e._v("Gameserver")]),e._v(" "),r("li",[e._v("Web-Admin-Tool (Serverinstanzen verwalten, Missionsupload, Logfiles Einsicht)")])])]),e._v(" "),r("ul",[r("li",[e._v("Auf arma.gruppe-adler.de l√§uft nginx als Webserver, der die Requests weiterleitet auf 127.0.0.1:3000 .")]),e._v(" "),r("li",[e._v("Dort lauscht ein Anrop-Auth-Proxy (installiert in "),r("code",[e._v("/home/arma/Anrop-Auth-Proxy")]),e._v("), der das Forumscookie nimmt um den user als Adler zu erkennen, und dann weiterleitet auf "),r("code",[e._v("127.0.0.1:3001")]),e._v("\nDort lauscht eine arma-server-web-admin - Instanz, die in "),r("code",[e._v("/home/arma/arma-server-web-admin")]),e._v(" installiert ist.\nes gibt daemon-scripte daf√ºr in "),r("code",[e._v("/etc/init.d")]),e._v(" . √úber "),r("code",[e._v("npm start")]),e._v(" und im tmux des arma3server-Users laufen lassen geht allerdings auch.")])]),e._v(" "),r("h3",{attrs:{id:"storage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#storage"}},[e._v("#")]),e._v(" storage")]),e._v(" "),r("p",[r("code",[e._v("u178853.your-storagebox.de")]),r("br"),e._v(" "),r("em",[e._v("Hetzner-storagebox")]),r("br"),e._v("\nServices: ssh,smb,ftp?")]),e._v(" "),r("h3",{attrs:{id:"deprecated-ehemals-armalin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#deprecated-ehemals-armalin"}},[e._v("#")]),e._v(" deprecated (ehemals armalin)")]),e._v(" "),r("p",[e._v("IPv4: "),r("code",[e._v("138.201.30.253")]),r("br"),e._v("\nIPv6: "),r("code",[e._v("2a01:4f8:171:3267::30")])]),e._v(" "),r("h2",{attrs:{id:"https"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[e._v("#")]),e._v(" Https")]),e._v(" "),r("p",[e._v("HTTPS ist mit einem kostenlosen Zertifikat von letsencrypt.org abgedeckt, momentan f√ºr die Subdomains admin, forum, wiki, www. Dieses Zertifikat l√§uft nach jeweils 90 Tagen ab. Es existiert ein Cronjob f√ºr den root-User, der dies jeweils am 1. jeden Monats erledigt.")]),e._v(" "),r("p",[e._v("Automatische redirects nach HTTPS existieren atm f√ºr admin, forum, www")]),e._v(" "),r("h2",{attrs:{id:"webservices"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#webservices"}},[e._v("#")]),e._v(" Webservices")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://arma.gruppe-adler.de/",target:"_blank",rel:"noopener noreferrer"}},[e._v("arma.gruppe-adler.de"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"teamspeak"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#teamspeak"}},[e._v("#")]),e._v(" Teamspeak")]),e._v(" "),r("p",[e._v("Teamspeak: "),r("code",[e._v("ts.gruppe-adler.de:9988")])]),e._v(" "),r("h2",{attrs:{id:"extern-gelagerte-webservices"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#extern-gelagerte-webservices"}},[e._v("#")]),e._v(" Extern gelagerte Webservices")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://discordapp.com/channels/106824005322838016/106824005322838016",target:"_blank",rel:"noopener noreferrer"}},[e._v("Discord Chat"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"shellzugriff"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#shellzugriff"}},[e._v("#")]),e._v(" Shellzugriff")]),e._v(" "),r("p",[e._v("Ausgew√§hlte Adler haben Shellzugriff auf die VMs (nomisum,mcdiod,xivid,fusselwurm,derzade). Dazu:")]),e._v(" "),r("p",[r("code",[e._v("ssh [username]@[hostname].gruppe-adler.de")])]),e._v(" "),r("p",[e._v("um root zu werden:")]),e._v(" "),r("ul",[r("li",[e._v("bei Ubuntu: sudo su und eigenes Passwort eingeben")]),e._v(" "),r("li",[e._v("bei Debian: su und root-Passwort eingeben wenn man's denn kennt :>")])]),e._v(" "),r("h2",{attrs:{id:"monitoring"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#monitoring"}},[e._v("#")]),e._v(" Monitoring")]),e._v(" "),r("p",[e._v("Servermonitoring wird mit "),r("strong",[e._v("prometheus.io")]),e._v(" erledigt. Wir haben als vhost "),r("code",[e._v("prometheus.gruppe-adler.de")]),e._v(". Die Zugriffe werden per nginx auf die Prometheus-Instanz geforwardet.")]),e._v(" "),r("p",[e._v("F√ºr Zugriff aufs web-Frontend / Graphing auf prometheus.gruppe-adler.de gehen. Benutzer: adler, Passwort: nomiestomi. Beispiele f√ºr die Abfragen, die dort m√∂glich sind: "),r("a",{attrs:{href:"https://prometheus.io/docs/querying/examples/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://prometheus.io/docs/querying/examples/"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Auf jeder VM l√§uft ein prometheus node_exporter (der Prometheus-Server selbst nicht!), dessen Daten von dem Hostsystem abgegriffen werden.")]),e._v(" "),r("p",[e._v("Es gibt auch "),r("a",{attrs:{href:"https://gruppeadler.grafana.net",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://gruppeadler.grafana.net"),r("OutboundLink")],1),e._v(" , von wo das Prometheus-output abgerufen wird.")])])}),[],!1,null,null,null);t.default=s.exports}}]);